<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2</title>

<meta property="description" itemprop="description" content="A short description of the post."/>

<link rel="canonical" href="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
<link rel="icon" type="image/png" href="../../images/favicon.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-03-08"/>
<meta property="article:created" itemprop="dateCreated" content="2020-03-08"/>
<meta name="article:author" content="Unknown"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A short description of the post."/>
<meta property="og:url" content="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"/>
<meta property="og:image" content="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-20-1.png"/>
<meta property="og:image:width" content="3840"/>
<meta property="og:image:height" content="3840"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Muhammad Nakhaee"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2"/>
<meta property="twitter:description" content="A short description of the post."/>
<meta property="twitter:url" content="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"/>
<meta property="twitter:image" content="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-20-1.png"/>
<meta property="twitter:image:width" content="3840"/>
<meta property="twitter:image:height" content="3840"/>
<meta property="twitter:site" content="@m_cnakhaee"/>
<meta property="twitter:creator" content="@m_cnakhaee"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2"/>
<meta name="citation_fulltext_html_url" content="https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2020/03/08"/>
<meta name="citation_publication_date" content="2020/03/08"/>
<meta name="citation_author" content="Unknown"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["creative_commons","title","description","author","date","output","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CC BY-SA"]},{"type":"character","attributes":{},"value":["Analyzing the 2020 Democratic Presidential Debates - Part 2"]},{"type":"character","attributes":{},"value":["A short description of the post."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Unknown"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["03-08-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"]},{"type":"character","attributes":{},"value":["https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-20-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-31-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-33-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-35-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-37-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-39-1.png","analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-41-1.png","candidates_1_10_debate_polarity_loweredd.csv","candidates_long_sentiment_entities.csv","candidates_sentiment_entities.csv","candidates_sentiment_entities_lower_case.csv","featured.JPG"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">@import url('https://fonts.googleapis.com/css2?family=Karla');
@import url('https://fonts.googleapis.com/css2?family=Alata');

:root {
  --font-body:   karla,-apple-system,BlinkMacSystemFont,roboto,segoe ui,Helvetica,Arial,sans-serif;
  --font-header: "LEMONMILKPro",Tahoma,"Helvetica Neue",Helvetica,Arial,sans-serif;
  --font-mono:   SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;

  --color-background:   #EAE9EA;
  --color-primary:      #74a08a;
  --color-primary-dark: #2F4238;
  --color-secondary:    #8a74a0;
  --color-tertiary:     #a08a74;
  --color-text:         #172a3a;
  --color-white:        #FFFFFF;
}

/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */


@font-face {
  font-family: 'LEMONMILKPro-Regular';
  src: local('LEMONMILKPro-Regular'), url('/fonts/LEMONMILKPro-Regular.woff2') format('woff2'), url('/fonts/LEMONMILKPro-Regular.woff') format('woff');
}

@font-face {
  font-family: 'LEMONMILKPro-Light';
  src: local('LEMONMILKPro-Light'), url('/fonts/LEMONMILKPro-Light.woff2') format('woff2'), url('/fonts/LEMONMILKPro-Light.woff') format('woff');
}

@font-face {
  font-family: 'LEMONMILKPro-UltraLight';
  src: local('LEMONMILKPro-UltraLight'), url('/fonts/LEMONMILKPro-UltraLight.woff2') format('woff2'), url('/fonts/LEMONMILKPro-UltraLight.woff') format('woff');
}

:root {
  --color-background:   white;
  --color-primary:      #D40067;
  --color-secondary:    #0079D1;
}

html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    'Alata', sans-serif;
  --mono-font:       var(--font-mono);
  --body-font:       'Karla', serif;
  --navbar-font:     var(--font-header);
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       black; /*rgba(255, 255, 255, 0.8);*/
  --text-size:        18px;
  --hover-color:      #D40067; /*white;*/
  --bkgd-color:       white; /*#0F2E3D;*/
}

.distill-site-footer {
  --text-color:       /*rgba(255, 255, 255, 0.8);*/
  --text-size:        15px;
  --hover-color:      #D40067;
  --bkgd-color:       white; /*#0F2E3D;*/
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below */

.distill-site-header {
  text-transform: uppercase;
}

h1, h2, h3 {
  font-family: "LEMONMILKPro-Regular", sans-serif;
  text-transform: uppercase;
}

/*
.btn-outline-dark {
    background-color: #D40067;
    color: white;
    border: 10px;
    border-color: black;
    font-family: "LEMONMILKPro-Regular", sans-serif;
}
*/

/* remove title - logo suffices*/
.distill-site-header .title {
  display: none;
}

.distill-site-header .logo img {
   max-height: 60px;
   width: auto;
   margin-top: 18px;
}

/* styling for icon-link buttons (see distilltools::icon_link()) */
.icon-link {
    background-color: transparent;
    color: #D40067;
    border: 1px solid;
    border-color: #D40067;
    padding: 5px .4rem 5px .4rem;
    /*margin: 4px;*/
    margin-top: 4px;
    margin-right: 8px;
    margin-bottom: 4px;
    border-radius: 5px; /* Rounded edges */
}

.icon-link:hover {
    background-color: #D40067;
    border-color: #D40067;
    color: white;
}

/*
For project cards
Adapted from Ijeamaka Anyene
https://github.com/Ijeamakaanyene/ijeamaka-anyene
https://ijeamaka-anyene.netlify.app
*/

.card {
    color: #474747;
    background-color: #FFFFFF;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    border-radius: 10px;
    margin: 16px 16px;
    text-decoration: none;
    display: flex;
}

.card-body {
  padding: 2px 16px;
}

.card-img {
  padding-top: 10px;
  padding-right: 10px;
  padding-bottom: 5px;
  border-radius: 30px;
}

.card-footer {
  background-color: #000;
  color: white;
  text-align: right;
  padding-right: 5px;
}


@media screen and (max-width: 992px) {
  .card {
    color: #474747;
    background-color: #FFFFFF;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    border-radius: 10px;
    margin: 16px 16px;
    text-decoration: none;
    display: block;
    width: 300px;
  }

}

/* image on home page - make bigger and squarer*/
.rounded-circle {
  border-radius: 3%!important;
  height: 15rem!important;
}

/* buttons on postcards homepage page
.btn-outline-dark targets when window is wide
.list-group-item targets when window is narrow
*/
.btn-outline-dark{
   color:#D40067;
   border-color:#D40067;
   font-family: "LEMONMILKPro-Light", sans-serif;
 }

.btn-outline-dark:hover {
    background-color: #D40067;
    border-color:#D40067;
    color: white;
    font-family: "LEMONMILKPro-Light", sans-serif;
    border: none;
}

.list-group-item {
   color:#D40067;
   border-color:#D40067;
   font-family: "LEMONMILKPro-Light", sans-serif;
 }

.list-group-item:hover {
    background-color: #D40067;
    border-color:#D40067;
    color: white;
    font-family: "LEMONMILKPro-Light", sans-serif;
    border: none;
 }

/* gets rid of blue text decoration on homepage buttons when window is narrow
but doesn't seem to affect links throughout the rest of the site.
This might be a problem if I ever want links on homepage matching style of rest of site, but this hacky fix will do for now*/
a {
  text-decoration: none!important;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.8/header-attrs.js"></script>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (!/posts/.test(location.pathname)) {
      return;
    }

    var script = document.createElement("script");
    script.src = "https://utteranc.es/client.js";
    script.setAttribute("repo", "mcnakhae/test_distill_mcnakhaee");
    script.setAttribute("issue-term", "title");
    script.setAttribute("crossorigin", "anonymous");
    script.setAttribute("label", "comments");
    script.setAttribute("theme", "github-light");

    /* wait for article to load, append script to article element */
    var observer = new MutationObserver(function (mutations, observer) {
      var article = document.querySelector("d-article");
      if (article) {
        observer.disconnect();
        /* HACK: article scroll */
        article.setAttribute("style", "overflow-y: hidden");
        article.appendChild(script);
      }
    });

    observer.observe(document.body, { childList: true });
  });
</script>

<!-- <script src="https://utteranc.es/client.js" -->
<!--         repo="sciencificity/Blog_Vebash" -->
<!--         issue-term="title" -->
<!--         label="comments ðŸ’¬" -->
<!--         theme="github-light" -->
<!--         crossorigin="anonymous" -->
<!--         async> -->
<!-- </script> -->
<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Analyzing the 2020 Democratic Presidential Debates - Part 2","description":"A short description of the post.","authors":[{"author":"Unknown","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2020-03-08T00:00:00.000+01:00","citationText":"Unknown, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="../../index.html">
<img src="../../images/logo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Muhammad Nakhaee</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="../../posts.html">Posts</a>
<a href="../../projects.html">Projects</a>
<a href="../../gallery.html">Photography</a>
<a href="https://github.com/mcnakhaee">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="https://twitter.com/m_cnakhaee">
<i class="fab fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://www.linkedin.com/in/muhammadcnakhaee/">
<i class="fab fa-linkedin" aria-hidden="true"></i>
</a>
<a href="https://instagram.com/m_cnakhaee">
<i class="fab fa-instagram" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Analyzing the 2020 Democratic Presidential Debates - Part 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Unknown true 
  
<br/>03-08-2020
</div>

<div class="d-article">
<h2 id="introduction">1. Introduction</h2>
<p>Many of us could not watch every 2020 Democratic Primary debate. It was important for some of us to know what happened during the debates. In my case, I was reading about what happened in debates in some online newspapers, or I watched a highlight of a debate on Youtube the next day. However, they only give a summary of a debate or just broadcast a portion of debates that includes a heated exchange of opinions between candidates. As a result, many important issues raised by candidates will be <strong>ignored and forgotten in the</strong> aftermath of a debate. So, it is crucial to summarize the debate’s content so that everyone could understand what went on in the debate and what issues each candidate addressed during his/her speech. In this blog post, I will show you how I used some NLP techniques for exploring the content of debates and give you a comprehensive overview of topics that each candidate discussed.</p>
<p><a href="https://mcnakhaee.com/post/2020-02-23-the-most-eloeuent-democratic-candidate/">In my last blog post</a>, I explained that I had the three following goals in mind when I started exploring the 2020 Democratic Debates :</p>
<ol type="1">
<li>To know how eloquent presidential candidates are.</li>
<li>To find out who used more positive or more negative words in his/her speech by performing sentiment analysis.</li>
<li>A map of topics, individuals, and entities that each candidate mentioned in his/her speech by using named entity recognition and network analysis..</li>
</ol>
<p>I only discussed how I approached the first two aspects of my experiment in my last blogpost. Now it is time to investigate the third and last one.</p>
<p>Initially, my aim was to use network analysis to determine potential allies and enemies on the debate stage. For example, <a href="https://www.theguardian.com/us-news/2020/mar/04/mike-bloomberg-out-60-second-attack-elizabeth-warren-destroyed-campaign">Elizabeth Warren mentioned Mike Bloomberg several times and attacked him harshly in the 9th debate</a>. During the same debate, <a href="https://www.independent.co.uk/news/world/americas/us-election/amy-klobuchar-pete-buttigieg-handshake-democratic-debate-video-a9348621.html">Amy Klobuchar and Pete Buttigieg clashed bitterly with each other</a>. These are just two instances of many other heated exchanges between the candidates that happened throughout the ten debates.</p>
<blockquote>
<p>To make things more precise, I transformed my objective into two questions that I would like to answer:</p>
</blockquote>
<blockquote>
<ol type="1">
<li>How many times did a candidate address (mention) other candidates during a debate?</li>
<li>How did he/she refer to a candidate(in a friendly or unfriendly manner)?</li>
</ol>
</blockquote>
<p>A simple approach to answering these questions is to store the names of all candidates in a variable (for example, a vector in R or a list in Python), iterate over the transcript, compute the sentiment, count and store the number of times that another candidate brought up a candidate’s name.</p>
<p>However, this approach is a little bit challenging and requires a lot of manual data pre-processing efforts. For each democratic candidate, one must compile a comprehensive combination of ways that may be used to call a candidate, and to prepare such a list seems to be a very time-consuming task. For example, other candidates mentioned Bernie Sanders in many different ways, including Bernie, Bernie Sanders, or Senator Sanders.</p>
<p>I realized that I could use Named Entity Recognition (NER), a technique from the Natural Language Processing (NLP) literature, to extract candidates’ names from the transcript and solve this problem more efficiently. Using this approach, I can find candidates’ names from the transcript, but I can also find the names of other politicians, individuals, and even organizations and further extend my analysis to include many more topics and issues.</p>
<h2 id="workflow">2. Workflow</h2>
<p>I made use of both Python and R in my analysis. My workflow includes the following steps:</p>
<ol type="1">
<li>I access the transcript of debates using this package.</li>
<li>I use tidytext to split the transcript into multiple sentences and also for sentiment analysis.</li>
<li>I extract several types of Named Entities from each sentence, using Spacy,</li>
<li>I compute the sentiment of each sentence using TextBlob library in Python.</li>
<li>I transferred the results to R for visualization. There, I visualize the network of mentions and entities using ggraph and ggplot library.</li>
</ol>
<p>Note that I could have implemented all the steps in R. For instance, Spacy has an R wrapper called Spacyr, which gives the same functionality that I need for this analysis. However, I’d like to increase the number of tools that I can use. Notably, using Python and R side by side is an exciting challenge for me.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/favstats/demdebates2020'>demdebates2020</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/juliasilge/tidytext'>tidytext</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidygraph.data-imaginist.com'>tidygraph</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggraph.data-imaginist.com'>ggraph</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/yutannihilation/gghighlight/'>gghighlight</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/jrnold/ggthemes'>ggthemes</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/reticulate'>reticulate</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://gitlab.com/hrbrmstr/pluralize'>pluralize</a></span><span class='op'>)</span>
<span class='fu'>theme_set</span><span class='op'>(</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/theme_graph.html'>theme_graph</a></span><span class='op'>(</span>base_family <span class='op'>=</span> <span class='st'>'Montserrat'</span><span class='op'>)</span>  <span class='op'>+</span>
    <span class='fu'>theme</span><span class='op'>(</span>
      panel.border <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
      plot.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>
        family <span class='op'>=</span> <span class='st'>'Montserrat'</span>,
        face <span class='op'>=</span> <span class='st'>"bold"</span>,
        colour <span class='op'>=</span> <span class='st'>'#540b0e'</span>,
        size <span class='op'>=</span> <span class='fl'>42</span>,
        margin <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span><span class='fl'>40</span>, <span class='fl'>40</span>, <span class='fl'>20</span>, <span class='fl'>10</span><span class='op'>)</span>,
        hjust <span class='op'>=</span> <span class='fl'>0</span>
      <span class='op'>)</span>,
      plot.subtitle <span class='op'>=</span>  <span class='fu'>element_text</span><span class='op'>(</span>
        family <span class='op'>=</span> <span class='st'>'Montserrat'</span>,
        face <span class='op'>=</span> <span class='st'>"bold"</span>,
        colour <span class='op'>=</span> <span class='st'>'#7d4f50'</span>,
        size <span class='op'>=</span> <span class='fl'>30</span>,
        margin <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span><span class='fl'>20</span>, <span class='fl'>40</span>, <span class='fl'>80</span>, <span class='fl'>10</span><span class='op'>)</span>,
        hjust <span class='op'>=</span> <span class='fl'>0</span>
      <span class='op'>)</span>,
      plot.caption <span class='op'>=</span>  <span class='fu'>element_text</span><span class='op'>(</span>
        family <span class='op'>=</span> <span class='st'>'Montserrat'</span>,
        face <span class='op'>=</span> <span class='st'>"bold"</span>,
        colour <span class='op'>=</span> <span class='st'>'#540b0e'</span>,
        size <span class='op'>=</span> <span class='fl'>16</span>,
        margin <span class='op'>=</span> <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>20</span>, <span class='fl'>20</span><span class='op'>)</span>,
      <span class='op'>)</span>,
      legend.position <span class='op'>=</span> <span class='st'>'none'</span>,
      plot.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>'#FCF0E1'</span><span class='op'>)</span>,
      
    <span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="loading-the-dataset">2.2 Loading the dataset</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>debates</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
speaker
</th>
<th style="text-align:left;">
background
</th>
<th style="text-align:left;">
speech
</th>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
debate
</th>
<th style="text-align:right;">
day
</th>
<th style="text-align:right;">
order
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
All right. So with that business out of the way, we want to get to it. And we’ll start this evening with Senator Elizabeth Warren.
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Senator, good evening to you.
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Elizabeth Warren
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Thank you. Good to be here.
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
You have many plans - free college, free child care, government health care, cancellation of student debt, new taxes, new regulations, the breakup of major corporations. But this comes at a time when 71 percent of Americans say the economy is doing well, including 60 percent of Democrats. What do you say to those who worry this kind of significant change could be risky to the economy?
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Elizabeth Warren
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
So I think of it this way. Who is this economy really working for? It’s doing great for a thinner and thinner slice at the top. It’s doing great for giant drug companies. It’s just not doing great for people who are trying to get a prescription filled.
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
Elizabeth Warren
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
It’s doing great for people who want to invest in private prisons, just not for the African Americans and Latinx whose families are torn apart, whose lives are destroyed, and whose communities are ruined.
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="tokenization">2.1. Tokenization</h3>
<p>As I mentioned before, I use tidytext to tokenize the transcript dataset based on sentences. For sentence tokenization, you need to set <code>token = 'sentences'</code> in <code>unnest_tokens()</code> function. I think sentence tokenization is a reasonable choice because candidates might change the subject or the tone of their speech in each sentence.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>debates</span> <span class='op'>&lt;-</span> <span class='va'>debates</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://rdrr.io/pkg/tidytext/man/unnest_tokens.html'>unnest_tokens</a></span><span class='op'>(</span><span class='va'>sentence</span>, <span class='va'>speech</span>, token <span class='op'>=</span> <span class='st'>'sentences'</span>,to_lower <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>debates</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>debates</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://rdrr.io/pkg/knitr/man/kable.html'>kable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_styling.html'>kable_styling</a></span><span class='op'>(</span>bootstrap_options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"striped"</span>, <span class='st'>"hover"</span>, <span class='st'>"condensed"</span>, <span class='st'>"responsive"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
speaker
</th>
<th style="text-align:left;">
background
</th>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
debate
</th>
<th style="text-align:right;">
day
</th>
<th style="text-align:right;">
order
</th>
<th style="text-align:left;">
sentence
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
All right.
</td>
</tr>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
So with that business out of the way, we want to get to it.
</td>
</tr>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
And we’ll start this evening with Senator Elizabeth Warren.
</td>
</tr>
<tr>
<td style="text-align:left;">
Savannah Guthrie
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Moderator
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Senator, good evening to you.
</td>
</tr>
<tr>
<td style="text-align:left;">
Elizabeth Warren
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Thank you.
</td>
</tr>
<tr>
<td style="text-align:left;">
Elizabeth Warren
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Good to be here.
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="named-entity-recognition-using-spacy">3. Named Entity Recognition using Spacy</h3>
<p>Now we change to python for NER, but we need to install and import a few python libraries before starting the analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spacy</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> textblob <span class="im">import</span> TextBlob</span></code></pre></div>
</div>
<p>In RStudio and Rmarkdown notebooks, with the help of the <code>reticulate</code> library, we can easily load the debate dataset in our R environment to our Python environment.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>debates <span class="op">=</span> r.debates</span></code></pre></div>
</div>
<p>Note that in in the transcript dataset there are rows for both the candidates and the moderators who asked questions from candidates. However, we are particularly interested in what the candidates said, so we only filter rows corresponding to candidates.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>candidates <span class="op">=</span> debates[(debates[<span class="st">&#39;type&#39;</span>] <span class="op">==</span> <span class="st">&#39;Candidate&#39;</span>) <span class="op">&amp;</span> (pd.notnull(debates[<span class="st">&#39;sentence&#39;</span>])) ]</span></code></pre></div>
</div>
<p>We are almost ready to extract the named entities. However, to use Spacy’s NLP features such as NER, we first need to download and load a pre-trained English language model. There are <a href="https://spacy.io/usage/models">several English language models</a> with different sizes available in Spacy. I used the largest language model available as it might be better and more accurate.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>nlp <span class="op">=</span> spacy.load(<span class="st">&#39;en_core_web_lg&#39;</span>)</span></code></pre></div>
</div>
<p>Spacy’s NER model is trained on the <a href="https://catalog.ldc.upenn.edu/LDC2013T19">OntoNotes 5</a> corpus, and it can detect several types of named entities, including:</p>
<table>
<thead>
<tr class="header">
<th>TYPE</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>PERSON</code></td>
<td>People, including fictional.</td>
</tr>
<tr class="even">
<td><code>NORP</code></td>
<td>Nationalities or religious or political groups.</td>
</tr>
<tr class="odd">
<td><code>FAC</code></td>
<td>Buildings, airports, highways, bridges, etc.</td>
</tr>
<tr class="even">
<td><code>ORG</code></td>
<td>Companies, agencies, institutions, etc.</td>
</tr>
<tr class="odd">
<td><code>GPE</code></td>
<td>Countries, cities, states.</td>
</tr>
<tr class="even">
<td><code>LOC</code></td>
<td>Non-GPE locations, mountain ranges, bodies of water.</td>
</tr>
<tr class="odd">
<td><code>PRODUCT</code></td>
<td>Objects, vehicles, foods, etc. (Not services.)</td>
</tr>
<tr class="even">
<td><code>EVENT</code></td>
<td>Named hurricanes, battles, wars, sports events, etc.</td>
</tr>
<tr class="odd">
<td><code>WORK_OF_ART</code></td>
<td>Titles of books, songs, etc.</td>
</tr>
<tr class="even">
<td><code>LAW</code></td>
<td>Named documents made into laws.</td>
</tr>
<tr class="odd">
<td><code>LANGUAGE</code></td>
<td>Any named language.</td>
</tr>
<tr class="even">
<td><code>DATE</code></td>
<td>Absolute or relative dates or periods.</td>
</tr>
<tr class="odd">
<td><code>TIME</code></td>
<td>Times smaller than a day.</td>
</tr>
<tr class="even">
<td><code>PERCENT</code></td>
<td>Percentage, including ”%“.</td>
</tr>
<tr class="odd">
<td><code>MONEY</code></td>
<td>Monetary values, including unit.</td>
</tr>
<tr class="even">
<td><code>QUANTITY</code></td>
<td>Measurements, as of weight or distance.</td>
</tr>
<tr class="odd">
<td><code>ORDINAL</code></td>
<td>“first”, “second”, etc.</td>
</tr>
<tr class="even">
<td><code>CARDINAL</code></td>
<td>Numerals that do not fall under another type.</td>
</tr>
</tbody>
</table>
<p>As you can see, there are many types of named entities, but I narrow down my analysis to just a handful of them, including <code>PERSON</code>, <code>ORG</code>, <code>GPE</code>, <code>NORP</code>, <code>LAW</code>, and <code>LOC</code>. The named entity labels are stored in <code>label_</code> attribute. To do so, we need to create <code>Doc</code> object using <code>nlp()</code> method. When we call <code>nlp()</code> on the input text, spacy uses the language model to tokenize the document first. Then, spacy applies a tagger, parser, and named entity recognizer steps as its processing pipeline’s next components. The named entities can be accessed by <code>ents</code> attribute of the document object.</p>
<p>If you are interested to learn more about Spacy and how it works, I have provided some links at the end of this post.</p>
<p>I define a python function that iterates over all named entities and see to which class of named entities (by default <code>PERSON</code>) they belong. I apply this function to the transcript column in the original dataset and store each extracted type of entity as a separate column.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_entities_delim(text,type_ent <span class="op">=</span> <span class="st">&#39;PERSON&#39;</span>):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  ent_text <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  doc <span class="op">=</span> nlp(text)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> e <span class="kw">in</span> doc.ents:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> e.label_ <span class="op">==</span> type_ent:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>      ent_text <span class="op">=</span> e.text<span class="op">+</span> <span class="st">&#39;;&#39;</span> <span class="op">+</span> ent_text </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ent_text</span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;PERSON&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;ORG&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x,<span class="st">&#39;ORG&#39;</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;GPE&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x,<span class="st">&#39;GPE&#39;</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;NORP&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x,<span class="st">&#39;NORP&#39;</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;LAW&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x,<span class="st">&#39;LAW&#39;</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;LOC&#39;</span>] <span class="op">=</span> candidates[<span class="st">&#39;sentence&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:extract_entities_delim(x,<span class="st">&#39;LOC&#39;</span>))</span></code></pre></div>
</div>
<h3 id="sentiment-analysis">4. Sentiment Analysis</h3>
<p>Next, I use TextBlob to compute each sentence’s sentiment and store its polarity score in a separate column called <code>polarity_sentiment</code> (TextBlob also returns a <code>subjectivity</code> score, but for simplicity, I will not use this score in my analysis). The polarity sentiment score is a value between -1 and 1. If the value is larger than 0, it means that the sentence has a positive sentiment. On the other hand, if the returned value is smaller than 0, it indicates that the sentence’s sentiment is negative.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> polarity_sentiment(text):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  blob <span class="op">=</span> TextBlob(text)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> blob.sentiment.polarity</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>candidates[<span class="st">&#39;polarity_sentiment&#39;</span>] <span class="op">=</span> candidates.sentence.<span class="bu">apply</span>(<span class="kw">lambda</span> x:polarity_sentiment(x))</span></code></pre></div>
</div>
<h2 id="network-visualization">5.Network Visualization</h2>
<p>A network (graph) can nicely represent how candidates mentioned individuals and entities in their speeches. We have two types of nodes in this network:</p>
<ol type="1">
<li>The first set of nodes represent candidates on the debate stage (<strong>from nodes)</strong>.</li>
<li>The second set of nodes represent named entities (including the name of candidates themselves) that the candidates referred to in their speeches (<strong>to</strong> <strong>nodes</strong>).</li>
</ol>
<p>If a candidate mentions a named entity in his/her speech, we connect the candidate node and the named entity node via our network’s edge. It is also fair to assume that the candidate-entity network should be weighted because candidates tend to place a varying level of importance on different issues, topics, and people (named entities).</p>
<p>We have two options for specifying weights for edges in the network:</p>
<ol type="1">
<li>We can use the number of times that a candidate mentioned a named entity in his/her speech. This shows how much a named entity was important to that candidate.</li>
<li>We can group by candidates and named entities and compute their average sentiment score. By doing so, we can measure how each candidate described these named entities. However, this approach might not be as accurate as we want.</li>
</ol>
<p>Having said that, it is time to go back to R and visualize the network of candidates and named entities using the <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a> and <code>tidygraph</code> libraries. For each class of named entities, I use <code>as_tbl_graph()</code> function, create a unique graph table dataset, and visualize the network.</p>
<p>So, let us load the sentiment-entity dataset that I created in the Python environment to the R environment.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>candidates</span> <span class='op'>&lt;-</span> <span class='va'>py</span><span class='op'>$</span><span class='va'>candidates</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>candidates</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
X1
</th>
<th style="text-align:left;">
speaker
</th>
<th style="text-align:left;">
background
</th>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
debate
</th>
<th style="text-align:right;">
day
</th>
<th style="text-align:right;">
order
</th>
<th style="text-align:left;">
sentence
</th>
<th style="text-align:left;">
PERSON
</th>
<th style="text-align:left;">
ORG
</th>
<th style="text-align:left;">
GPE
</th>
<th style="text-align:left;">
NORP
</th>
<th style="text-align:left;">
LAW
</th>
<th style="text-align:left;">
LOC
</th>
<th style="text-align:right;">
polarity_sentiment
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
370
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Well, first, the economy.
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.250
</td>
</tr>
<tr>
<td style="text-align:right;">
371
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
We know that not everyone is sharing in this prosperity.
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
372
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
And Donald Trump just sits in the White House and gloats about what’s going on, when you have so many people that are having trouble affording college and having trouble affording their premiums.
</td>
<td style="text-align:left;">
Donald Trump;
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.025
</td>
</tr>
<tr>
<td style="text-align:right;">
373
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
So I do get concerned about paying for college for rich kids.
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.375
</td>
</tr>
<tr>
<td style="text-align:right;">
374
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
I do.
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
375
</td>
<td style="text-align:left;">
Amy Klobuchar
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Candidate
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
But I think my plan is a good one.
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.700
</td>
</tr>
</tbody>
</table>
</div>
<h4 id="the-candidateperson-network">5.1 The Candidate/Person Network</h4>
<p>First, I will visualize the candidate/person network. However, I should remind you that in the beginning of the democratic primary, many democratic candidates were competing against each other in the race and on the debate stage. If I were to visualize every individual that each candidate had ever in the network, the results would become unreadable. So, just like my last blog post, I selected a few democratic candidates to show my analysis.</p>
<p>Furthermore, I will only highlight nodes corresponding to the top 6 democratic candidates and other interesting individuals, including Donald Trump and Barack Obama.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>interesting_individuals</span> <span class='op'>&lt;-</span>
 <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"Bernie Sanders"</span> ,
  <span class='st'>"Elizabeth Warren"</span> ,
  <span class='st'>"Mike Bloomberg"</span>  ,
  <span class='st'>"Pete Buttigieg"</span> ,
  <span class='st'>"Amy Klobuchar"</span> ,
  <span class='st'>"Joe Biden"</span>,
  <span class='st'>'Donald Trump'</span>,
  <span class='st'>'Barack Obama'</span>
 <span class='op'>)</span>



<span class='va'>custom_palette</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
    <span class='st'>'Mike Bloomberg'</span> <span class='op'>=</span> <span class='st'>'#EDC948'</span>,
    <span class='st'>'Amy Klobuchar'</span> <span class='op'>=</span> <span class='st'>'#59A14F'</span> ,
    <span class='st'>'Joe Biden'</span> <span class='op'>=</span> <span class='st'>'#E15759'</span>,
    <span class='st'>'Pete Buttigieg'</span> <span class='op'>=</span> <span class='st'>'#B07AA1'</span>,
    <span class='st'>'Elizabeth Warren'</span> <span class='op'>=</span>  <span class='st'>'#F28E2B'</span>,
    <span class='st'>'Bernie Sanders'</span> <span class='op'>=</span>  <span class='st'>'#4E79A7'</span> ,
    <span class='st'>'Donald Trump'</span> <span class='op'>=</span> <span class='st'>'#BC3908'</span>,
    <span class='st'>'Barack Obama'</span> <span class='op'>=</span> <span class='st'>'#00afb9'</span>,
    <span class='st'>'Others'</span> <span class='op'>=</span> <span class='st'>'#540b0e'</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>persons_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
 <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>PERSON</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,<span class='va'>PERSON</span> <span class='op'>!=</span> <span class='st'>''</span>, <span class='va'>debate</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>8</span>, <span class='fl'>9</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>PERSON</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span>,
      mean_sent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>polarity_sentiment</span><span class='op'>)</span>,
      sent <span class='op'>=</span><span class='fu'>case_when</span><span class='op'>(</span><span class='va'>mean_sent</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='fl'>0.01</span> <span class='op'>~</span> <span class='st'>'Negative'</span>,
               <span class='va'>mean_sent</span> <span class='op'>&gt;</span> <span class='fl'>0.01</span> <span class='op'>~</span> <span class='st'>'Positive'</span>,
              <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='st'>'Neutral'</span> <span class='op'>)</span>
               <span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>edge_cols</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'#e63946'</span>,<span class='st'>'#f1faee'</span>,<span class='st'>'#457B9D'</span><span class='op'>)</span>
<span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>persons_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'kk'</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>,colour <span class='op'>=</span> <span class='va'>sent</span> <span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span> <span class='op'>)</span>,size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>,color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,repel <span class='op'>=</span> <span class='cn'>TRUE</span>,size<span class='op'>=</span> <span class='fl'>8</span><span class='op'>)</span> <span class='op'>+</span> 
 <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Who Mentioned Whom in the 2020 Democratic Debates?'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/scale_edge_colour.html'>scale_edge_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>edge_cols</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-20-1.png" width="1920" /></p>
</div>
<p>If you look at the graph carefully, you will notice three issues with this network. First of all, the sentiment scores do not necessarily indicate how a candidate thinks about that person. For instance, Bernie Sanders and Khashoggi’s edge is red (i.e. negative sentiment), but Bernie Sanders did not talk negatively about Khashoggi at all but rather how he was murdered. Secondly, there are several nodes in the network that belong to the same individual. For example, Bernie Sanders tends to address other candidates by their first names, but other (younger) candidates usually use the last name to address each other.</p>
<p>The third issue is that some nodes do not represent a person. The transcript dataset is full of errors, and many names are misspelled. Although Spacy is a very powerful library for NER, sometimes it gives us wrong results, and its detected named entities are not always correct. For this reason, we also need to perform a post-processing step in which we remove some incorrectly spelled words or replaced them with their correct forms. I found two ways to deal with these issues: 1. or we can use a name matching algorithm to match the partial names with its full name. This approach can be challenging because we need to have a list of all possible full names, which is only available for the candidates.2. We can manually find undesirable names and replace them with what we want.</p>
<h4 id="matching-candidate-names">5.1 Matching candidate names</h4>
<p>A python library called <code>fuzzywuzzy</code>can help us match two strings based on different similarity criteria. However, before using this library, I transform the original dataset into a long dataframe where each row belongs to a pair of candidate-person (from-to), and I move it back to our python environment.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>candidates_long</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>PERSON</span> <span class='op'>!=</span> <span class='st'>''</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>PERSON</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> 
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>candidates_long</span><span class='op'>)</span>
</code></pre>
</div>
<h1 id="a-tibble-6-x-16">A tibble: 6 x 16</h1>
<pre><code> X1 speaker  background type  gender debate   day order sentence  </code></pre>
<p><dbl> <chr> <lgl> <chr> <chr> <dbl> <dbl> <dbl> <chr><br />
1 372 Amy Klo~ NA Cand~ female 1 1 11 And Donal~ 2 372 Amy Klo~ NA Cand~ female 1 1 11 And Donal~ 3 384 Amy Klo~ NA Cand~ female 1 1 99 It’s some~ 4 384 Amy Klo~ NA Cand~ female 1 1 99 It’s some~ 5 422 Amy Klo~ NA Cand~ female 1 1 329 But the p~ 6 422 Amy Klo~ NA Cand~ female 1 1 329 But the p~ # … with 7 more variables: PERSON <chr>, ORG <chr>, GPE <chr>, # NORP <chr>, LAW <chr>, LOC <chr>, polarity_sentiment <dbl></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>candidates_long <span class="op">=</span> r.candidates_long</span></code></pre></div>
</div>
<p>Let’s look at the full names of democratic candidates.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>candidate_lists <span class="op">=</span> pd.unique(candidates_long.speaker)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(candidate_lists)</span></code></pre></div>
</div>
<p>I define a python function called <code>match_names</code>that uses <code>process.extractOne</code> function to select the first matched named entity with at least 80 percent similarity to a candidate’s full name. The matched names are stored in a separate column called <code>dem_candidate_full_name</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fuzzywuzzy <span class="im">import</span> fuzz </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fuzzywuzzy <span class="im">import</span> process </span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> match_names(name):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span>:</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> process.extractOne(name, candidate_lists,score_cutoff <span class="op">=</span> <span class="dv">80</span>)[<span class="dv">0</span>] </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">except</span>:</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>candidates_long[<span class="st">&#39;dem_candidate_full_name&#39;</span>] <span class="op">=</span> candidates_long.PERSON.<span class="bu">apply</span>(<span class="kw">lambda</span> x: match_names(x) )</span></code></pre></div>
</div>
<p>Now we can return to R and continue our analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>candidates_long</span> <span class='op'>&lt;-</span> <span class='va'>py</span><span class='op'>$</span><span class='va'>candidates_long</span>
<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>candidates_long</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="a-word-of-caution">A word of caution</h4>
<p>We need to be very careful with the results of the name-matching algorithm. There are too many politicians with the name ‘John’ and a John might refer to “John McCain” or “John Bolton” not the candidate “John Hickenlooper”. So, as a post-processing step, I manually explore the dataset to correct the few mistakes that the matching algorithm had made.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>candidates_long</span> <span class='op'>&lt;-</span> <span class='va'>candidates_long</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>PERSON <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span>
    <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dem_candidate_full_name</span><span class='op'>)</span>,
    <span class='va'>dem_candidate_full_name</span>,
    <span class='va'>PERSON</span><span class='op'>)</span>,
  PERSON <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span><span class='va'>PERSON</span> <span class='op'>==</span> <span class='st'>'John Hickenlooper'</span> <span class='op'>&amp;</span> <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>sentence</span>,<span class='st'>'McCain'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'John McCain'</span>,
                      <span class='va'>PERSON</span> <span class='op'>==</span> <span class='st'>'John Hickenlooper'</span> <span class='op'>&amp;</span> <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>sentence</span>,<span class='st'>'Bolton'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'John Bolton'</span>,
                      <span class='va'>PERSON</span> <span class='op'>==</span> <span class='st'>'John Delaney'</span> <span class='op'>&amp;</span> <span class='va'>speaker</span> <span class='op'>==</span> <span class='st'>'Joe Biden'</span> <span class='op'>~</span><span class='st'>'John McCain'</span>,
                      <span class='va'>PERSON</span> <span class='op'>==</span> <span class='st'>'John Delaney'</span> <span class='op'>&amp;</span> <span class='va'>speaker</span> <span class='op'>==</span> <span class='st'>'  Amy Klobuchar'</span> <span class='op'>~</span><span class='st'>'John McCain'</span>,
                      <span class='cn'>TRUE</span> <span class='op'>~</span>  <span class='va'>PERSON</span><span class='op'>)</span>
  <span class='op'>)</span> 
</code></pre>
</div>
</div>
<h3 id="manual-name-correction">5.2 Manual name correction</h3>
<p>We have a better dataset now, but there are still a lot of inaccurate named entities or inconsistencies in the dataset. Let’s start by removing named entities that do not correspond with a real person.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>non_person</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
    <span class='st'>'y adema'</span> ,
    <span class='st'>'Appalachia'</span> ,
    <span class='st'>'AUMF'</span> ,
    <span class='st'>'bias'</span>,
    <span class='st'>'nondisclosur'</span> ,
    <span class='st'>'Mathew 25'</span>,
    <span class='st'>'Idlib'</span>,
    <span class='st'>'ye'</span>,
    <span class='st'>'Everytown'</span>,
    <span class='st'>'Kurd'</span>,
    <span class='st'>'Roe V.'</span>,
    <span class='st'>'Wade'</span>,
    <span class='st'>'Trumpism'</span>,
    <span class='st'>'Casey'</span>,
    <span class='st'>'brown'</span>,
    <span class='st'>'Grandpa'</span>,
    <span class='st'>'Dad'</span>,
    <span class='st'>"Josh"</span>,
    <span class='st'>'Uighurs'</span>,
    <span class='st'>'Roe'</span>,
    <span class='st'>'PolitiFact'</span>,
    <span class='st'>'Latinx'</span>,
    <span class='st'>'Brady'</span>,
    <span class='st'>'pre-K.'</span>,
    <span class='st'>'Brady Bill'</span>,
    <span class='st'>'pro-Israel'</span>,
    <span class='st'>'ho'</span>,
    <span class='st'>'Dreamer'</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We have another problem left. Some individuals were mentioned in different ways, and we have several nodes for them in the graph. To solve this issue, I use <code>str_detect</code> function from <code>stringr</code> package to manually modify them names. I must say this was the most tedious and time-consuming part of my analysis!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>persons_graph_table</span> <span class='op'>&lt;-</span>  <span class='va'>candidates_long</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,
         <span class='op'>!</span><span class='va'>PERSON</span> <span class='op'>%in%</span> <span class='va'>non_person</span>,
         <span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>PERSON</span><span class='op'>)</span><span class='op'>&gt;</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/rowwise.html'>rowwise</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>dem_candidate_full_name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>dem_candidate_full_name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>PERSON</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    to <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
        <span class='st'>'Donald'</span>,
        <span class='st'>'Donald Trump'</span>,
        <span class='st'>'Donald trump'</span>,
        <span class='st'>'Trump'</span>,
        <span class='st'>'President Trump'</span>,
        <span class='st'>"Donald Trump's"</span>
      <span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Donald Trump'</span>,
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Hillar'</span>,
                <span class='st'>'Clinton'</span>,
                <span class='st'>'Hillary'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Hillary Clinton'</span>,
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Obama'</span>,
                <span class='st'>'Barack'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Barack Obama'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Trump'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Donald Trump'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Vind'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Vindman'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Assad'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Assad'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'McCarthy'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'McCarthy'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Trudeau'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Justin Trudeau'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Bannon'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Steve Bannon'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Netanyahu'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Netanyahu'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Martin Luther'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Martin Luther King'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Mandela'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Mandela'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Xi'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Xi Jinping'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Putin'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Putin'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Mitch'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Mitch Mcconnell'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Lindsey'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Lindsey Graham'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Romney'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Mitt Romney'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'George'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'George Bush'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Bush'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'George Bush'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Turner'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Nina Turner'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Clyburn'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Jim Clyburn'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Cheney'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Dick Cheney'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Shaheen'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Jeanne Shaheen'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Hart'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Quentin Hart'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Cokie'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Cokie Roberts'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Kelly'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Laura Kelly'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Berry'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Seth Berry'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Grassley'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Chuck Grassley'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Tommy'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Tom Steyer'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Pelosi'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Nancy Pelosi'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Kim'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Kim Jong-un'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Pence'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Mike Pence'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Schatz'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Brian Schatz'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Gates'</span><span class='op'>)</span> <span class='op'>~</span>  <span class='st'>'Robert Gates'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Jill'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Jill Biden'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Casey Jo'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Casey Jo'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Franklin'</span><span class='op'>)</span> <span class='op'>|</span>
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'FDR'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Franklin D. Roosevelt'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Welch'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Joseph Welch'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Beau'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Beau Biden'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Rudy Giuliani'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Rudy Giuliani'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Bolton'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'John Bolton'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'McCain'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'John McCain'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Truman'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Harry Truman'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Dunford'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Joe Dunford'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Breyer'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Justice Breyer'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Cindy'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Cindy McCain'</span>,
      <span class='va'>to</span> <span class='op'>==</span> <span class='st'>'Dick'</span> <span class='op'>~</span> <span class='st'>'Uncle Dick'</span>,
      <span class='va'>to</span> <span class='op'>==</span> <span class='st'>'Charles'</span> <span class='op'>~</span> <span class='st'>'Charles Fried'</span>,
      <span class='va'>to</span> <span class='op'>==</span> <span class='st'>'JFK'</span> <span class='op'>|</span>
        <span class='op'>(</span><span class='va'>to</span> <span class='op'>==</span> <span class='st'>'Kennedy'</span> <span class='op'>&amp;</span> <span class='va'>speaker</span> <span class='op'>==</span> <span class='st'>'Joe Biden'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'John F. Kennedy'</span>,
      <span class='va'>to</span> <span class='op'>==</span> <span class='st'>'Kennedy'</span> <span class='op'>&amp;</span> <span class='va'>speaker</span> <span class='op'>==</span> <span class='st'>'Amy Klobuchar'</span> <span class='op'>~</span> <span class='st'>'Ted Kennedy'</span>,
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Joey'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Himself'</span>,
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
        <span class='st'>'Ady'</span>,
        <span class='st'>'Carl'</span>,
        <span class='st'>'Ady Barkan'</span>,
        <span class='st'>'Derek'</span>,
        <span class='st'>'Mark'</span>,
        <span class='st'>'Salvador'</span>,
        <span class='st'>'Rachael'</span>,
        <span class='st'>'Nicole'</span>
      <span class='op'>)</span> <span class='op'>~</span> <span class='st'>'American Constituents'</span>,
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
        <span class='st'>'David'</span>,
        <span class='st'>'Chuck'</span>,
        <span class='st'>'Wolf'</span>,
        <span class='st'>'  Wolf'</span>,
        <span class='st'>'Margaret'</span>,
        <span class='st'>'Brianne'</span>,
        <span class='st'>'Adam'</span>,
        <span class='st'>'Jake'</span>,
        <span class='st'>'Norah'</span>,
        <span class='st'>'Judy'</span>,
        <span class='st'>'Gayle'</span>,
        <span class='st'>'Dana'</span>,
        <span class='st'>'Jorge - it'</span>,
        <span class='st'>'Lester'</span>,
        <span class='st'>'Rachel'</span>
      <span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Moderator'</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='va'>to</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span>  
</code></pre>
</div>
</div>
<p>Finally, we can visualize the network with modified node names.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>edge_cols</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'#e63946'</span>, <span class='st'>'#f1faee'</span>, <span class='st'>'#457B9D'</span><span class='op'>)</span>
<span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>persons_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'nicely'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>, alpha <span class='op'>=</span> <span class='va'>n_mentions</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>'#540b0e'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>, color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,
    repel <span class='op'>=</span> <span class='cn'>TRUE</span>,
    size <span class='op'>=</span> <span class='fl'>8</span>,
    label.r <span class='op'>=</span> <span class='fl'>0.4</span>,
    check_overlap <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Individuals Mentioned by Top Democratic Candidates During the Democratic Primary Debates'</span>,
       subtitle <span class='op'>=</span> <span class='st'>'This graph shows which individuals or politicians were mentioned by top 6 democratic candidates over the course of first ten priamary debates.'</span>,
       caption <span class='op'>=</span> <span class='st'>'Visualization: @m_cnakhaee\n\n Source: https://github.com/favstats/demdebates2020'</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-31-1.png" width="3840" /></p>
</div>
<h3 id="candidates-interaction">5.3 Candidates interaction</h3>
<p>In the last sections, I explained how the top 6 remaining candidates mentioned other individuals during their speeches on the debate stage. However, with a little bit of modification to our previous chunk of code, we can extend the analysis and investigate how all democratic candidates interacted with each other over the course of 10 debates.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#The name of all candidaes</span>
<span class='va'>all_candidates</span> <span class='op'>&lt;-</span> <span class='va'>candidates_long</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></span><span class='op'>(</span><span class='va'>speaker</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>candidates_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates_long</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dem_candidate_full_name</span><span class='op'>)</span>,
         <span class='va'>dem_candidate_full_name</span> <span class='op'>==</span> <span class='va'>PERSON</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rowwise</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>debate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>debate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>dem_candidate_full_name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>dem_candidate_full_name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>dem_candidate_full_name</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span>, <span class='va'>debate</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span>directed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/activate.html'>activate</a></span><span class='op'>(</span><span class='va'>nodes</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>bet_cent <span class='op'>=</span> <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/centrality.html'>centrality_betweenness</a></span><span class='op'>(</span><span class='op'>)</span>,
         deg_cent <span class='op'>=</span> <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/centrality.html'>centrality_degree</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># preparing the circular layout for the network</span>
<span class='co'># Credit to https://www.timlrx.com/2018/10/14/visualising-networks-in-asoiaf-part-ii/ for helping me with the circular layout</span>
<span class='va'>full_layout</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>create_layout</a></span><span class='op'>(</span>graph <span class='op'>=</span> <span class='va'>candidates_graph_table</span>,
                layout <span class='op'>=</span> <span class='st'>"linear"</span>,
                circular <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>

<span class='va'>xmin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>full_layout</span><span class='op'>$</span><span class='va'>x</span><span class='op'>)</span>
<span class='va'>xmax</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>full_layout</span><span class='op'>$</span><span class='va'>x</span><span class='op'>)</span>
<span class='va'>ymin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>full_layout</span><span class='op'>$</span><span class='va'>y</span><span class='op'>)</span>
<span class='va'>ymax</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>full_layout</span><span class='op'>$</span><span class='va'>y</span><span class='op'>)</span>

<span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span>
  <span class='va'>full_layout</span>,
  layout <span class='op'>=</span> <span class='st'>'manual'</span>,
  x <span class='op'>=</span> <span class='va'>x</span>,
  y <span class='op'>=</span> <span class='va'>y</span>,
  circular <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_arc.html'>geom_edge_arc</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>,
                    alpha <span class='op'>=</span> <span class='va'>n_mentions</span>,<span class='op'>)</span>,
                colour <span class='op'>=</span> <span class='st'>'#540b0e'</span>,<span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span>, size <span class='op'>=</span> <span class='va'>deg_cent</span> <span class='op'>+</span> <span class='fl'>40</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_text</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>
      label <span class='op'>=</span> <span class='va'>name</span>,
      color <span class='op'>=</span> <span class='va'>interesting_individuals</span>,
      x <span class='op'>=</span> <span class='va'>x</span> <span class='op'>*</span> <span class='fl'>1.15</span>,
      y <span class='op'>=</span> <span class='va'>y</span> <span class='op'>*</span> <span class='fl'>1.15</span>,
      angle <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span>
        <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>atan</a></span><span class='op'>(</span><span class='op'>-</span><span class='op'>(</span><span class='va'>x</span> <span class='op'>/</span> <span class='va'>y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>180</span> <span class='op'>/</span> <span class='va'>pi</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='fl'>0</span>,
        <span class='fl'>90</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>atan</a></span><span class='op'>(</span><span class='op'>-</span><span class='op'>(</span><span class='va'>x</span> <span class='op'>/</span> <span class='va'>y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>180</span> <span class='op'>/</span> <span class='va'>pi</span><span class='op'>)</span>,
        <span class='fl'>270</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>atan</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>x</span> <span class='op'>/</span> <span class='va'>y</span><span class='op'>)</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>180</span> <span class='op'>/</span> <span class='va'>pi</span><span class='op'>)</span>
      <span class='op'>)</span>
    <span class='op'>)</span>,
    size <span class='op'>=</span> <span class='fl'>8</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'The Network of Interactions Among Democratic Candidates During Democratic Primary Debates'</span>,
       <span class='co'>#subtitle = 'This graph shows how democtratic candidates mentioned other candidates on the debate stage.',</span>
       caption <span class='op'>=</span> <span class='st'>'Visualization: @m_cnakhaee\n\n Source: https://github.com/favstats/demdebates2020'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>expand_limits</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>xmin</span> <span class='op'>-</span> <span class='fl'>0.2</span>, <span class='va'>xmax</span> <span class='op'>+</span> <span class='fl'>0.2</span><span class='op'>)</span>,
                y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>ymin</span> <span class='op'>-</span> <span class='fl'>0.2</span>, <span class='va'>ymax</span> <span class='op'>+</span> <span class='fl'>0.2</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-33-1.png" width="2880" /></p>
</div>
<p>The results are self-explanatory and satisfying. One also can make an animation and show the network over time.</p>
<p>Now, let’s repeat the same steps and visualize the network for other types of named entities.</p>
<h3 id="organization-and-companies-named-entities">5.4 Organization and companies named entities</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>non_org</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Trump'</span>,<span class='st'>'Vindmen'</span>,<span class='st'>'a New Yorker'</span>,<span class='st'>'Title'</span>,<span class='st'>'Obama'</span>,<span class='st'>"Donald Trump's"</span>,<span class='st'>'Bernie'</span>,<span class='st'>'state'</span>,<span class='st'>'Court'</span>,<span class='st'>'Ours'</span>,<span class='st'>'Education'</span><span class='op'>)</span>
<span class='va'>non_org_laws</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Green New Deal'</span>,<span class='st'>'Federal Controlled Substance Act'</span><span class='op'>)</span>

<span class='va'>org_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
  <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>ORG</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>ORG</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>ORG <span class='op'>=</span> <span class='fu'>str_remove_all</span><span class='op'>(</span><span class='va'>ORG</span>, <span class='st'>'the '</span><span class='op'>)</span>,
         ORG <span class='op'>=</span> <span class='fu'>str_remove_all</span><span class='op'>(</span><span class='va'>ORG</span>, <span class='st'>'this '</span><span class='op'>)</span>,<span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span>
    
    <span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,<span class='op'>!</span><span class='va'>ORG</span> <span class='op'>%in%</span> <span class='va'>non_org</span>,<span class='op'>!</span><span class='va'>ORG</span> <span class='op'>%in%</span> <span class='va'>non_org_laws</span>,
    <span class='va'>debate</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>, <span class='fl'>9</span>, <span class='fl'>10</span><span class='op'>)</span>,
    <span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>ORG</span><span class='op'>)</span><span class='op'>&gt;</span><span class='fl'>1</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>ORG</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    to <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='va'>to</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'United Nations'</span>,
                <span class='st'>'U.N.'</span>,
                <span class='st'>'UN'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'United Nations'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Department'</span><span class='op'>)</span> <span class='op'>&amp;</span>
        <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'State'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Department of State'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Department'</span><span class='op'>)</span> <span class='op'>&amp;</span>
        <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Defence'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Department of State'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Supreme'</span><span class='op'>)</span> <span class='op'>&amp;</span>
        <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Court'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Supreme Court'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Treasury'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Department of the Treasury'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Unitetd'</span><span class='op'>)</span> <span class='op'>&amp;</span>
        <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'State'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'United State'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Yale'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Yale'</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='va'>to</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>org_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'nicely'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>,alpha<span class='op'>=</span><span class='va'>n_mentions</span><span class='op'>)</span>,
    colour <span class='op'>=</span> <span class='st'>'#540b0e'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>, color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,
                  repel <span class='op'>=</span> <span class='cn'>TRUE</span>,
                  size <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Organizations and Institutions Mentioned by Top Democratic Candidates During the Debates'</span>,
       subtitle <span class='op'>=</span> <span class='st'>'This plot shows which organizations and institutions were mentioned by top democratic candidates during the last 5 debates.'</span>,
       caption <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-35-1.png" width="2880" /></p>
</div>
<h3 id="the-network-of-named-entities-for-countries-and-cities">5.5 The network of named entities for countries and cities</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gpe_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
  <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>GPE</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>GPE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>GPE <span class='op'>=</span> <span class='fu'>str_remove_all</span><span class='op'>(</span><span class='va'>GPE</span>, <span class='st'>'the '</span><span class='op'>)</span>,
         GPE <span class='op'>=</span> <span class='fu'>str_remove_all</span><span class='op'>(</span><span class='va'>GPE</span>, <span class='st'>'this '</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,
         <span class='va'>debate</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>, <span class='fl'>9</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>GPE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>gpe_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'nicely'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>, alpha <span class='op'>=</span> <span class='va'>n_mentions</span><span class='op'>)</span>,
                 colour <span class='op'>=</span> <span class='st'>'#540b0e'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>, color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,
                  repel <span class='op'>=</span> <span class='cn'>TRUE</span>,
                  size <span class='op'>=</span> <span class='fl'>9</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Countries, Cities and States Mentioned by Top Democratic Candidates During the Last Five Primary Debates'</span>,
       subtitle <span class='op'>=</span> <span class='st'>''</span>,
       caption <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-37-1.png" width="3360" /></p>
</div>
<h3 id="the-network-of-named-entities-for-laws">5.6 The network of named entities for laws</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>non_law</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'the ZIP Code'</span>, <span class='st'>""</span><span class='op'>)</span>

<span class='va'>law_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
  <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>LAW</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>LAW</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>LAW <span class='op'>=</span> <span class='fu'>str_remove_all</span><span class='op'>(</span><span class='va'>LAW</span>, <span class='st'>'the '</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,<span class='op'>!</span><span class='va'>LAW</span> <span class='op'>%in%</span> <span class='va'>non_law</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>LAW</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    to <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span> , <span class='st'>'Constitution'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Constitution'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span> , <span class='st'>'Roe'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Roe V. Wade'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span> , <span class='st'>'War Powers Act'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'War Powers Act'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span> , <span class='st'>'New START'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'New START Treaty'</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='va'>to</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>law_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'nicely'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>, alpha <span class='op'>=</span> <span class='va'>n_mentions</span><span class='op'>)</span>, colour <span class='op'>=</span> <span class='st'>'#540b0e'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>, color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,
                  repel <span class='op'>=</span> <span class='cn'>TRUE</span>,
                  size <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Laws Mentioned by Top Democratic Candidates During the First Ten Primary Debates'</span>,
       subtitle <span class='op'>=</span> <span class='st'>''</span>,
       caption <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-39-1.png" width="2880" /></p>
</div>
<h3 id="the-network-of-named-entities-for-nationalities-religious-or-political-groups">5.7 The network of named entities for nationalities, religious or political groups</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>non_norp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Coronavirus'</span>, <span class='st'>''</span><span class='op'>)</span>
<span class='va'>norp_graph_table</span> <span class='op'>&lt;-</span> <span class='va'>candidates</span> <span class='op'>%&gt;%</span>
  <span class='fu'>separate_rows</span><span class='op'>(</span><span class='va'>NORP</span>, sep <span class='op'>=</span> <span class='st'>';'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>NORP</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>NORP <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/pluralize/man/singularize.html'>singularize</a></span><span class='op'>(</span><span class='va'>NORP</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>speaker</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>,<span class='op'>!</span><span class='va'>NORP</span> <span class='op'>%in%</span> <span class='va'>non_norp</span>,
         <span class='va'>debate</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>, <span class='fl'>9</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='va'>speaker</span>, to <span class='op'>=</span> <span class='va'>NORP</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>from</span>, <span class='va'>to</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarize</span><span class='op'>(</span>n_mentions <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    to <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'African'</span><span class='op'>)</span> <span class='op'>&amp;</span>
        <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'American'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'African-American'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'republican'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Republican'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Democrat'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Democrat'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Jew'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Jew'</span>,
      <span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>to</span>, <span class='st'>'Palestinian'</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>'Palestinian'</span>,
      <span class='cn'>TRUE</span> <span class='op'>~</span> <span class='va'>to</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://tidygraph.data-imaginist.com/reference/tbl_graph.html'>as_tbl_graph</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>interesting_individuals <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='va'>name</span> <span class='op'>%in%</span> <span class='va'>interesting_individuals</span>, <span class='va'>name</span>, <span class='st'>'Others'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggraph.data-imaginist.com/reference/ggraph.html'>ggraph</a></span><span class='op'>(</span><span class='va'>norp_graph_table</span>, layout <span class='op'>=</span> <span class='st'>'nicely'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_edge_link.html'>geom_edge_link</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>edge_width <span class='op'>=</span> <span class='va'>n_mentions</span>, alpha <span class='op'>=</span> <span class='va'>n_mentions</span><span class='op'>)</span>, colour <span class='op'>=</span> <span class='st'>'#540b0e'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_point.html'>geom_node_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggraph.data-imaginist.com/reference/geom_node_text.html'>geom_node_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>name</span>, color <span class='op'>=</span> <span class='va'>interesting_individuals</span><span class='op'>)</span>,
                  repel <span class='op'>=</span> <span class='cn'>TRUE</span>,
                  size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>custom_palette</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>'Nationalities, religious or Political Groups Mentioned by Top Democratic Candidates During the Last Five Primary Debates'</span>,
       subtitle <span class='op'>=</span> <span class='st'>''</span>,
       caption <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-2020-democratic-presidential-debates-part-2_files/figure-html5/unnamed-chunk-41-1.png" width="3840" /></p>
</div>
<p>##Resources: A very useful place to learn more how spacy works the spacy’s online course by one of its founders and developers. [1] <a href="https://course.spacy.io/en/" class="uri">https://course.spacy.io/en/</a></p>
<p>[2] <a href="https://www.youtube.com/watch?v=IqOJU1-_Fi0&amp;t=676s" class="uri">https://www.youtube.com/watch?v=IqOJU1-_Fi0&amp;t=676s</a></p>
<p>There is <a href="http://www.favstats.eu/post/demdebates/" class="uri">http://www.favstats.eu/post/demdebates/</a></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/mcnakhaee/issues/new">create an issue</a> on the source repository.</p>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. Source code is available at <a href="https://github.com/mcnakhaee">https://github.com/mcnakhaee</a>, unless otherwise noted. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Unknown (2020, March 8). Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2. Retrieved from https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{unknown2020analyzing,
  author = {Unknown, },
  title = {Muhammad Nakhaee: Analyzing the 2020 Democratic Presidential Debates - Part 2},
  url = {https://mcnakhaee.com/posts/2020-03-08-analyzing-the-2020-democratic-presidential-debates-part-2/},
  year = {2020}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
